<%- include("partials/header", { title: "Admin Notifications" }) %>
<%- include("partials/navbar", { user: user }) %>

<div class="container container-max py-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h3 class="mb-1">Notifications</h3>
      <div class="small-muted">Alerts generated by system rules.</div>
    </div>
    <a href="/admin/dashboard" class="btn btn-outline-primary btn-sm">Back to Dashboard</a>
  </div>

  <div class="card shadow-soft p-4">
    <% if (!notifications || notifications.length === 0) { %>
      <div class="alert alert-light mb-0">No notifications.</div>
    <% } else { %>
      <div class="d-grid gap-3">
        <% notifications.forEach(n => { %>
          <div class="border rounded-4 p-3 d-flex justify-content-between align-items-start">
            <div>
              <div class="fw-semibold"><%= n.type.replace(/_/g, ' ') %></div>
              <div class="small-muted"><%= n.message %></div>
              <div class="small text-muted mt-1">
                <%= new Date(n.created_at).toLocaleString() %>
                <% if (n.provider_id) { %>
                  â€¢ Provider: <%= n.provider_name || ("#" + n.provider_id) %>
                <% } %>
              </div>
            </div>
            <span class="badge bg-dark"><%= n.is_read ? "Read" : "New" %></span>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>

<%- include("partials/footer") %>
